---
title: "Extracting OP names from Tanmay Bhat Youtuve Videos"
publishedAt: "2024-12-25"
summary: "Exploring various STT models to extract a certain type of nicknames of guest appearing on Tanmay bhat's videos"
tags: "AI, STT, Side Project"
---

## The Idea
If you watch Tanmay Bhat's reaction videos, you would have noticed that he always give his guest nicknames that ends with "er" like Rider OP, Prisoner OP, etc. So I thought what all nicknames have been used so far and is there someone who's maintaining a Database for it? 
As my first instinct I just plexed it to see if perplexity has its answer

<div className="flex justify-center">
  <Image 
    src="/images/perplexity-answer.png"
    alt="Perplexity Answer"
    width={300}
    height={300}
    className="rounded-lg my-4"
  />
</div>

As it showed me nothing I decided to take matter into my own hands.

<Caption>
  "Fine, I'll do it myself"
</Caption>

## **Approach**
Of course I'd want to programmatically find this out instead of watching all the videos and noting the names down.

### **1. Get the Transcription of the videos**
Once we have what was spoken in thi video we can easily get those nicknames from the text.
- **Video Metadata Fetching**:
  - Initially relied on the YouTube Data API v3 to fetch the videos which presented challenges in handling channel and playlist IDs plus the entire API documentation was quite hard to understand. 
  - Transitioned to `yt-dlp` for video metadata and audio extraction, which simlpified the process a lot. But it did take ~8-9 hours to process all the videos. 
- **Audio Processing**:
  - Initially I was trimming only the starting 30 seconds, but realised that in a lot of videos the introduction is done quite late so started taking first 2 minute audio. 
  - Used `ffmpeg` to trim the first 2 minutes of audio for transcription.
  - Maintained a pipeline that avoids redundant audio downloads, optimizing resource usage.

---

### **2. Transcription Services**
For transcription I initially tested Deepgram, Whisper, and Google's STT to transcribe Speech-to-text. Used their APIs to transcribe local audio files.
Check the video below which highlights the output quality of each of the APIs.
<Video
src="/videos/STT-api-comparison.mp4"
controls
style={{
maxWidth: "100%",
height: "auto",
borderRadius: "8px",
marginTop: "1rem",
marginBottom: "1rem"
}}
/>

- **Google STT API**:
  - Tried on multiple videos but results were quite inaccurate, I think that could be due to multi-langugage in the audio or the indian accent of english could be the reason.
- **OpenAI Whisper API**:
  - Provided multilingual transcription but struggled with Hinglish-specific content accuracy. But gave quite good output when the langage parameter was set to translate to english
  - Even tested some open source tranliteration APIs to convert hindi text to hinglish text to extract nicknames but the output was not accurate. 
- **Deepgram API**:
  - Offered high accuracy for English transcriptions but underperformed with mixed-language (Hindi/Hinglish) content. Even with langaugae param set to "multi" it didn't transcribe the hindi language used in the audio. 
- **Fallback Mechanism**:
  - Used both Whisper and Deepgram APIs to store and transcribe the result to maximize transcription accuracy and coverage.

---

### **3. Nickname Extraction**
- **Regex Logic**:
  - Extracted nicknames matching patterns like `<Something ending with er> OP` or `<Something ending with ar> OP`.
- **GPT-4 Processing**:
  - Utilized a refined prompt to infer and standardize nicknames when transcriptions contained errors or ambiguities.
  - Addressed issues like incorrect nicknames (`"Prznar OP"`) by standardizing them (`"Prisoner OP"`).
  Check the entire prompt sent for processing
<Caption
You are an expert at extracting nicknames from YouTube video transcripts, especially skilled at identifying badly transcribed nicknames that end with "OP".
  
      ### Critical Understanding:
      1. Due to speech-to-text errors, nicknames often get badly mangled:
         - "Hustler OP" might appear as "has the rope", "hustle rope", "hazlr op"
         - "Writer OP" might appear as "write rope", "riter op"
         - "Gamer OP" might appear as "game rope", "gamma op", "gaymer op"
      
      2. Look for these specific patterns:
         - Words near introduction phrases like "let me introduce", "we got", "with us"
         - Words ending in sounds like "rope", "hope", "op", "rop", "ob", "opie"
         - Continuous sequences that might be split incorrectly (e.g., "has the rope" → "Hustler OP" , "Bank Aurobi" -> "Banker OP" )
  
      3. Common Transcription Problems:
         - Words get split incorrectly: "hus tler" instead of "hustler"
         - "OP" gets transcribed as: "rope", "hope", "ob", "op", "rop", "opi", "Aurobi"
         - Sounds get merged: "wriderop" instead of "Writer OP"
         - Extra words inserted: "has the" instead of "hustler"
  
      ### Analysis Steps:
      1. First, find obvious nicknames (ending with OP/rope/hope)
      2. Then, look for split or mangled versions:
         - Look for sequences of 2-3 words that could be a nickname
         - Check if any word combinations could form a valid nickname
         - Pay special attention to words near introduction phrases
      3. For each potential nickname:
         - Try combining adjacent words
         - Remove common filler words ("the", "a", "has")
         - Check if the combined form makes a valid "-er/-ar" nickname
  
      ### Example Corrections:
      "has the rope" → "Hustler OP"
      "game write rope" → "Gamer OP", "Writer OP"
      "stream rope killer hope" → "Streamer OP", "Killer OP"
  
      ### Transcription to Analyze:
      ${transcription}
  
      Return ONLY a JSON array of the corrected nicknames. Each nickname should:
      - End with " OP"
      - Have proper capitalization
      - Be a real word ending in -er or -ar
      Example: ["Gamer OP", "Writer OP", "Hustler OP"]
/Caption>

---

## **Challenges and Solutions**

### **1. Mixed-Language Transcriptions**
- **Problem**: Transcription services often ignored or misprocessed Hindi/Hinglish content.
- **Solution**: Combined Deepgram (for English) and Whisper (for multilingual) to cover both scenarios. Results from both were saved for further analysis.

### **2. Inconsistent Nickname Standardization**
- **Problem**: Transcriptions contained errors (e.g., `"Mahib Ji OP"`).
- **Solution**: Developed a robust GPT prompt with examples and validation to infer meaningful and standardized nicknames.

---

## **Implementation**

### **Workflow**
1. **Video Metadata**:
   - Fetched video details using `yt-dlp`.
2. **Audio Processing**:
   - Downloaded and trimmed 2-minute audio segments with `ffmpeg`.
3. **Transcription**:
   - Sent audio to both Deepgram and Whisper APIs.
4. **Nickname Extraction**:
   - Applied Regex for direct extraction.
   - Used GPT for advanced inference and standardization.

## Key Learnings
- STT models need more training on data spoken in both hindi and english or hinglish. 
- The critical role of inference optimization
- The balance between audio quality and processing speed
- The importance of GPU resources in ML applications
- The real-world challenges of building AI-powered applications
